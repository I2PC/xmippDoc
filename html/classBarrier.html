<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Xmipp: Barrier Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xmipp_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xmipp
   &#160;<span id="projectnumber">v20.07</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classBarrier-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Barrier Class Reference<div class="ingroups"><a class="el" href="group__Threads.html">Threads</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="xmipp__threads_8h_source.html">xmipp_threads.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a03db30acce9503049e92c0b299e161ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarrier.html#a03db30acce9503049e92c0b299e161ce">Barrier</a> (int numberOfThreads)</td></tr>
<tr class="separator:a03db30acce9503049e92c0b299e161ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401f40e73302009b305904ffc7825304"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarrier.html#a401f40e73302009b305904ffc7825304">~Barrier</a> ()</td></tr>
<tr class="separator:a401f40e73302009b305904ffc7825304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83a9d2e85e98b3d2081538bf0da29b60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBarrier.html#a83a9d2e85e98b3d2081538bf0da29b60">wait</a> ()</td></tr>
<tr class="separator:a83a9d2e85e98b3d2081538bf0da29b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to synchronize several threads in some point of execution. Threads is a way of distributing workload across different workers to solve a problem faster. Nevertheless, sometimes we need synchronization between threads to avoid undesired race conditions and other problems. Here we are an implementation of a barrier that allows putting all threads to wait at a given point until all of them have reached such point and can continue working. Barriers are usually available through pthreads system library. Nonetheless, sometimes it is not so we have to implement it here. </p><div class="fragment"><div class="line"><a class="code" href="classMutex.html">Mutex</a> <a class="code" href="group__ProjectionXRProgram.html#gae8b85b4f519a4945ba9ea43e9b503531">mutex</a>;</div><div class="line"></div><div class="line"><span class="comment">//Then in each thread to access the critical section:</span></div><div class="line"> mutex.<a class="code" href="classMutex.html#ad91be808bf0a60a16f10b897ec246d3a">lock</a>();</div><div class="line"> <span class="comment">//...Do critical section stuff</span></div><div class="line"> mutex.<a class="code" href="classMutex.html#a546a5b797ba29959357586aa2b3740a8">unlock</a>();</div></div><!-- fragment --> 
<p>Definition at line <a class="el" href="xmipp__threads_8h_source.html#l00150">150</a> of file <a class="el" href="xmipp__threads_8h_source.html">xmipp_threads.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a03db30acce9503049e92c0b299e161ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Barrier::Barrier </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numberOfThreads</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor of the barrier to initialize the object. You should pass the number of working threads that you want to wait on the barrier. The internal counter of the barrier will be initialized with numberOfThreads + 1 taking into account the main thread, so it need to wait also in the barrier with the worker threads to all can move on. </p><div class="fragment"><div class="line"><span class="comment">//For synchronize 10 threads created by a main thread</span></div><div class="line"><span class="comment">//you can create the barrier from the main thread</span></div><div class="line"><a class="code" href="classBarrier.html">Barrier</a> * <a class="code" href="group__ProjectionXRProgram.html#gaa7d3601dfe4f1448143811e57bd9ca46">barrier</a> = <span class="keyword">new</span> <a class="code" href="classBarrier.html#a03db30acce9503049e92c0b299e161ce">Barrier</a>(10);</div><div class="line"><span class="comment">//...</span></div><div class="line"><span class="comment">//In the synchronization point</span></div><div class="line">barrier-&gt;<a class="code" href="classBarrier.html#a83a9d2e85e98b3d2081538bf0da29b60">wait</a>();</div></div><!-- fragment --> 
<p>Definition at line <a class="el" href="xmipp__threads_8cpp_source.html#l00097">97</a> of file <a class="el" href="xmipp__threads_8cpp_source.html">xmipp_threads.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    needed = numberOfThreads;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    called = 0;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    condition = <span class="keyword">new</span> <a class="code" href="classCondition.html">Condition</a>();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div><div class="ttc" id="classCondition_html"><div class="ttname"><a href="classCondition.html">Condition</a></div><div class="ttdef"><b>Definition:</b> <a href="xmipp__threads_8h_source.html#l00088">xmipp_threads.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a401f40e73302009b305904ffc7825304"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Barrier::~Barrier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor to free all memory used </p>

<p>Definition at line <a class="el" href="xmipp__threads_8cpp_source.html#l00104">104</a> of file <a class="el" href="xmipp__threads_8cpp_source.html">xmipp_threads.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">delete</span> condition;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a83a9d2e85e98b3d2081538bf0da29b60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barrier::wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request to wait in this meet point. For each thread calling this function the execution will be paused until all threads arrive this point. </p>

<p>Definition at line <a class="el" href="xmipp__threads_8cpp_source.html#l00109">109</a> of file <a class="el" href="xmipp__threads_8cpp_source.html">xmipp_threads.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    condition-&gt;<a class="code" href="classCondition.html#a7751371aa41d718275fdf287f3d5344a">lock</a>();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    ++called;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (called == needed)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        called = 0;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        condition-&gt;<a class="code" href="classCondition.html#a15d88ea71e837f967d13d805d675cc5b">broadcast</a>();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        condition-&gt;<a class="code" href="classCondition.html#a0bb9ca22c3c755d0ed8c7483a857567a">wait</a>();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    condition-&gt;<a class="code" href="classCondition.html#af27e4e896b57ad7cda3ab4b3f44931ad">unlock</a>();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="ttc" id="classCondition_html_af27e4e896b57ad7cda3ab4b3f44931ad"><div class="ttname"><a href="classCondition.html#af27e4e896b57ad7cda3ab4b3f44931ad">Condition::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__threads_8cpp_source.html#l00075">xmipp_threads.cpp:75</a></div></div>
<div class="ttc" id="classCondition_html_a0bb9ca22c3c755d0ed8c7483a857567a"><div class="ttname"><a href="classCondition.html#a0bb9ca22c3c755d0ed8c7483a857567a">Condition::wait</a></div><div class="ttdeci">void wait()</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__threads_8cpp_source.html#l00080">xmipp_threads.cpp:80</a></div></div>
<div class="ttc" id="classCondition_html_a15d88ea71e837f967d13d805d675cc5b"><div class="ttname"><a href="classCondition.html#a15d88ea71e837f967d13d805d675cc5b">Condition::broadcast</a></div><div class="ttdeci">void broadcast()</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__threads_8cpp_source.html#l00090">xmipp_threads.cpp:90</a></div></div>
<div class="ttc" id="classCondition_html_a7751371aa41d718275fdf287f3d5344a"><div class="ttname"><a href="classCondition.html#a7751371aa41d718275fdf287f3d5344a">Condition::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__threads_8cpp_source.html#l00070">xmipp_threads.cpp:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/yunior/Yunior/Projects/Scipion/COSS/xmipp-bundle/src/xmippCore/core/<a class="el" href="xmipp__threads_8h_source.html">xmipp_threads.h</a></li>
<li>/home/yunior/Yunior/Projects/Scipion/COSS/xmipp-bundle/src/xmippCore/core/<a class="el" href="xmipp__threads_8cpp_source.html">xmipp_threads.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
