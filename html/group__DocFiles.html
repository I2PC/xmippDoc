<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Xmipp: Document Files (Docfiles)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xmipp_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xmipp
   &#160;<span id="projectnumber">v20.07</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Document Files (Docfiles)</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocLine.html">DocLine</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocFile.html">DocFile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Useful functions working with docfiles</h2></td></tr>
<tr class="memitem:ga545174232cc7f3c6fba8fc6571614c0c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DocFiles.html#ga545174232cc7f3c6fba8fc6571614c0c">read_Euler_document_file</a> (<a class="el" href="classFileName.html">FileName</a> fn, std::string ang1, std::string ang2, std::string ang3, <a class="el" href="classDocFile.html">DocFile</a> &amp;DF)</td></tr>
<tr class="separator:ga545174232cc7f3c6fba8fc6571614c0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b4725bf2509678dcf76beb75e72c92c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DocFiles.html#ga4b4725bf2509678dcf76beb75e72c92c">select_images</a> (<a class="el" href="classDocFile.html">DocFile</a> &amp;DF, <a class="el" href="classMetaData.html">MetaData</a> &amp;SF, int <a class="el" href="numerical__recipes_8cpp.html#afb52e720f5f0c483db5861f9e42e924e">col</a>, bool en_limit0, double limit0, bool en_limitF, double limitF)</td></tr>
<tr class="separator:ga4b4725bf2509678dcf76beb75e72c92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadbfe0e1b22eb3d8860d066455eee1744"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DocFiles.html#gadbfe0e1b22eb3d8860d066455eee1744">get_subset_docfile</a> (<a class="el" href="classDocFile.html">DocFile</a> &amp;DFin, <a class="el" href="classMetaData.html">MetaData</a> &amp;SF, <a class="el" href="classDocFile.html">DocFile</a> &amp;DFout)</td></tr>
<tr class="separator:gadbfe0e1b22eb3d8860d066455eee1744"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gadbfe0e1b22eb3d8860d066455eee1744"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_subset_docfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDocFile.html">DocFile</a> &amp;&#160;</td>
          <td class="paramname"><em>DFin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMetaData.html">MetaData</a> &amp;&#160;</td>
          <td class="paramname"><em>SF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDocFile.html">DocFile</a> &amp;&#160;</td>
          <td class="paramname"><em>DFout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a docfile containing only those images in the input selfile</p>
<p>For this to work, the docfile should be in NewXmipp-like format with all filenames in comments above each line The docfile may contain more images than the selfile, but all images in the selfile should be present in the input docfile. The output docfile has the same order of images as the input selfile. </p>

<p>Definition at line <a class="el" href="docfile_8cpp_source.html#l01488">1488</a> of file <a class="el" href="docfile_8cpp_source.html">docfile.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;{</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="classDocLine.html">DocLine</a> DL;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="classFileName.html">FileName</a> fn_tmp;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    DFout.<a class="code" href="classDocFile.html#ac7ad72c623d7b4084132dc63f2a390da">clear</a>();</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    DFin.<a class="code" href="classDocFile.html#a744a6eee18f9bce09e639b3c99dfecc6">go_beginning</a>();</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    DL = DFin.<a class="code" href="classDocFile.html#a28e0cf2752e577fc1ba20f5b738e7376">get_current_line</a>();</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">if</span> (DL.<a class="code" href="classDocLine.html#aaeeff8b97898067d75e8e2a0db7837cd">Is_comment</a>())</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        fn_tmp = DL.<a class="code" href="classDocLine.html#a9261624e0e8a8a4645d713be2059d4a3">get_text</a>();</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">if</span> (strstr(fn_tmp.c_str(), <span class="stringliteral">&quot;Headerinfo&quot;</span>) == NULL)</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <a class="code" href="group__ErrorHandling.html#ga4ab7f9b2fd1ec4b9efcfba0c9b33052c">REPORT_ERROR</a>(<a class="code" href="group__ErrorHandling.html#ggab0df38968e4f03a3f1f6d6df0f31f45aa2f53bae2e0351c49070345e18166e74e">ERR_DOCFILE</a>,<span class="stringliteral">&quot;Input docfile is not of NewXmipp-style&quot;</span>);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="comment">// append the same header to DFout</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        DFout.<a class="code" href="classDocFile.html#a5f390c3df20a9e71da739fcbd8e49615">append_comment</a>(fn_tmp.<a class="code" href="classFileName.html#aa6048f01b6c7e153ab61f939a7501274">removeSubstring</a>(<span class="stringliteral">&quot; ; &quot;</span>));</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <a class="code" href="group__MetaData.html#ga85652b971edca3acc93a9f1bef2f17f6">FOR_ALL_OBJECTS_IN_METADATA</a>(SF)</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        SF.<a class="code" href="classMetaData.html#a2239fbb7e492654f1e2866ab27492a5d">getValue</a>(<a class="code" href="group__MetaData.html#gga7a6f95c8cfb46e6dfb2689b5cabd3f78af4298cfa617e6143f021d0d7956a7f70">MDL_IMAGE</a>,fn_tmp, __iter.objId);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordflow">if</span> (DFin.<a class="code" href="classDocFile.html#a43074c814e2ea512adfa90e135a2bfdc">search_comment</a>(fn_tmp))</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            DFout.<a class="code" href="classDocFile.html#a5f390c3df20a9e71da739fcbd8e49615">append_comment</a>(fn_tmp);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            DL=DFin.<a class="code" href="classDocFile.html#a28e0cf2752e577fc1ba20f5b738e7376">get_current_line</a>();</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            DFout.<a class="code" href="classDocFile.html#acaafa23cf0508eab5c805a9cc340584a">append_line</a>(DL);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <a class="code" href="group__ErrorHandling.html#ga4ab7f9b2fd1ec4b9efcfba0c9b33052c">REPORT_ERROR</a>(<a class="code" href="group__ErrorHandling.html#ggab0df38968e4f03a3f1f6d6df0f31f45aa2f53bae2e0351c49070345e18166e74e">ERR_DOCFILE</a>, (<a class="code" href="namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a>)<span class="stringliteral">&quot;Docfile: Cannot find &quot;</span> + fn_tmp + <span class="stringliteral">&quot; in docfile &quot;</span>);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    }</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div><div class="ttc" id="classDocFile_html_a744a6eee18f9bce09e639b3c99dfecc6"><div class="ttname"><a href="classDocFile.html#a744a6eee18f9bce09e639b3c99dfecc6">DocFile::go_beginning</a></div><div class="ttdeci">void go_beginning()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00402">docfile.h:402</a></div></div>
<div class="ttc" id="classDocFile_html_a28e0cf2752e577fc1ba20f5b738e7376"><div class="ttname"><a href="classDocFile.html#a28e0cf2752e577fc1ba20f5b738e7376">DocFile::get_current_line</a></div><div class="ttdeci">DocLine get_current_line()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00820">docfile.h:820</a></div></div>
<div class="ttc" id="classDocLine_html_a9261624e0e8a8a4645d713be2059d4a3"><div class="ttname"><a href="classDocLine.html#a9261624e0e8a8a4645d713be2059d4a3">DocLine::get_text</a></div><div class="ttdeci">std::string get_text()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00143">docfile.h:143</a></div></div>
<div class="ttc" id="group__ErrorHandling_html_ga4ab7f9b2fd1ec4b9efcfba0c9b33052c"><div class="ttname"><a href="group__ErrorHandling.html#ga4ab7f9b2fd1ec4b9efcfba0c9b33052c">REPORT_ERROR</a></div><div class="ttdeci">#define REPORT_ERROR(nerr, ErrormMsg)</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__error_8h_source.html#l00238">xmipp_error.h:238</a></div></div>
<div class="ttc" id="classDocLine_html"><div class="ttname"><a href="classDocLine.html">DocLine</a></div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00054">docfile.h:54</a></div></div>
<div class="ttc" id="namespacetesting_1_1internal_html_a8e8ff5b11e64078831112677156cb111"><div class="ttname"><a href="namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">testing::internal::string</a></div><div class="ttdeci">::std::string string</div><div class="ttdef"><b>Definition:</b> <a href="gtest_8h_source.html#l01818">gtest.h:1818</a></div></div>
<div class="ttc" id="classFileName_html"><div class="ttname"><a href="classFileName.html">FileName</a></div><div class="ttdef"><b>Definition:</b> <a href="xmipp__filename_8h_source.html#l00068">xmipp_filename.h:68</a></div></div>
<div class="ttc" id="classMetaData_html_a2239fbb7e492654f1e2866ab27492a5d"><div class="ttname"><a href="classMetaData.html#a2239fbb7e492654f1e2866ab27492a5d">MetaData::getValue</a></div><div class="ttdeci">bool getValue(MDObject &amp;mdValueOut, size_t id) const </div><div class="ttdef"><b>Definition:</b> <a href="metadata_8cpp_source.html#l00217">metadata.cpp:217</a></div></div>
<div class="ttc" id="group__MetaData_html_ga85652b971edca3acc93a9f1bef2f17f6"><div class="ttname"><a href="group__MetaData.html#ga85652b971edca3acc93a9f1bef2f17f6">FOR_ALL_OBJECTS_IN_METADATA</a></div><div class="ttdeci">#define FOR_ALL_OBJECTS_IN_METADATA(__md)</div><div class="ttdef"><b>Definition:</b> <a href="metadata_8h_source.html#l00081">metadata.h:81</a></div></div>
<div class="ttc" id="classDocFile_html_ac7ad72c623d7b4084132dc63f2a390da"><div class="ttname"><a href="classDocFile.html#ac7ad72c623d7b4084132dc63f2a390da">DocFile::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8cpp_source.html#l00212">docfile.cpp:212</a></div></div>
<div class="ttc" id="classDocFile_html_acaafa23cf0508eab5c805a9cc340584a"><div class="ttname"><a href="classDocFile.html#acaafa23cf0508eab5c805a9cc340584a">DocFile::append_line</a></div><div class="ttdeci">int append_line(DocLine &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8cpp_source.html#l01214">docfile.cpp:1214</a></div></div>
<div class="ttc" id="classDocLine_html_aaeeff8b97898067d75e8e2a0db7837cd"><div class="ttname"><a href="classDocLine.html#aaeeff8b97898067d75e8e2a0db7837cd">DocLine::Is_comment</a></div><div class="ttdeci">int Is_comment()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00173">docfile.h:173</a></div></div>
<div class="ttc" id="classDocFile_html_a43074c814e2ea512adfa90e135a2bfdc"><div class="ttname"><a href="classDocFile.html#a43074c814e2ea512adfa90e135a2bfdc">DocFile::search_comment</a></div><div class="ttdeci">int search_comment(std::string comment)</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8cpp_source.html#l00473">docfile.cpp:473</a></div></div>
<div class="ttc" id="group__ErrorHandling_html_ggab0df38968e4f03a3f1f6d6df0f31f45aa2f53bae2e0351c49070345e18166e74e"><div class="ttname"><a href="group__ErrorHandling.html#ggab0df38968e4f03a3f1f6d6df0f31f45aa2f53bae2e0351c49070345e18166e74e">ERR_DOCFILE</a></div><div class="ttdoc">Error in docfile format. </div><div class="ttdef"><b>Definition:</b> <a href="xmipp__error_8h_source.html#l00127">xmipp_error.h:127</a></div></div>
<div class="ttc" id="classDocFile_html_a5f390c3df20a9e71da739fcbd8e49615"><div class="ttname"><a href="classDocFile.html#a5f390c3df20a9e71da739fcbd8e49615">DocFile::append_comment</a></div><div class="ttdeci">void append_comment(const std::string &amp;comment)</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8cpp_source.html#l01052">docfile.cpp:1052</a></div></div>
<div class="ttc" id="group__MetaData_html_gga7a6f95c8cfb46e6dfb2689b5cabd3f78af4298cfa617e6143f021d0d7956a7f70"><div class="ttname"><a href="group__MetaData.html#gga7a6f95c8cfb46e6dfb2689b5cabd3f78af4298cfa617e6143f021d0d7956a7f70">MDL_IMAGE</a></div><div class="ttdoc">Name of an image (std::string) </div><div class="ttdef"><b>Definition:</b> <a href="metadata__label_8h_source.html#l00235">metadata_label.h:235</a></div></div>
<div class="ttc" id="classFileName_html_aa6048f01b6c7e153ab61f939a7501274"><div class="ttname"><a href="classFileName.html#aa6048f01b6c7e153ab61f939a7501274">FileName::removeSubstring</a></div><div class="ttdeci">FileName removeSubstring(const String &amp;sub) const </div><div class="ttdef"><b>Definition:</b> <a href="xmipp__filename_8cpp_source.html#l00617">xmipp_filename.cpp:617</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga545174232cc7f3c6fba8fc6571614c0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_Euler_document_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFileName.html">FileName</a>&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ang1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ang2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ang3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDocFile.html">DocFile</a> &amp;&#160;</td>
          <td class="paramname"><em>DF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read Document File with <a class="el" href="classEuler.html">Euler</a> angles.</p>
<p>This function reads a document file with <a class="el" href="classEuler.html">Euler</a> angles. The <a class="el" href="classEuler.html">Euler</a> angles can be in any order in the file (the order must be specified in the function call, see below) but the result is always reordered to (rot, tilt, psi). The function returns the number of total data lines inside the document file.</p>
<p>The order specification is performed using the labels "rot", "tilt" and "psi". You must specify a label for each column. The following example reads "angle.doc" into DF. The order of columns inside angle.doc is (psi, tilt, rot) but DF will be (rot,tilt,psi).</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;std::cout &lt;&lt; &quot;There are &quot;;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;std::cout &lt;&lt; read_Euler_document_file(&quot;angle.doc&quot;,&quot;psi&quot;,&quot;tilt&quot;,&quot;rot&quot;,DF);</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;std::cout &lt;&lt; &quot; sets of angles&quot; &lt;&lt; std::endl</div></div><!-- fragment --> 
<p>Definition at line <a class="el" href="docfile_8cpp_source.html#l01423">1423</a> of file <a class="el" href="docfile_8cpp_source.html">docfile.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;{</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="classDocFile.html">DocFile</a> aux(name);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <a class="code" href="classDocLine.html">DocLine</a> line1, line2;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="comment">// Set line2 as a data line and go to the beginning of file</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    line2.<a class="code" href="classDocLine.html#a262a32bd2da2c9e0d7f30a04583e7ede">set_type</a>(<a class="code" href="classDocLine.html#ae95eb619d620a30587ed36fcfc37b79ea5d3145796cbec597ce0ba0d1e16ea833">DocLine::DATALINE</a>);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    aux.go_beginning();</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">// Macro to assign the angle from line1 in the correct place of line2</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="comment">// The angle order in line2 is (rot, tilt, psi)</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="preprocessor">#define assign_in_correct_place_of_line2(angle_descr,angle_index) \</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="preprocessor">    switch (angle_descr[0]) \</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="preprocessor">    { \</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="preprocessor">    case (&#39;r&#39;): line2.set(0, line1[angle_index]); break; \</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="preprocessor">    case (&#39;t&#39;): line2.set(1, line1[angle_index]); break; \</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="preprocessor">    case (&#39;p&#39;): line2.set(2, line1[angle_index]); break; \</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="preprocessor">    }</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="comment">// Read the whole file</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">while</span> (!aux.eof())</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        line1 = aux.get_current_line();</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="comment">// If line1 type is neither DATALINE nor COMMENT the line is skipped!!</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span> (line1.<a class="code" href="classDocLine.html#a7f21c449dfd69c398f619882768fa99e">Is_data</a>())</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <span class="comment">// Reorder the angles and insert</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <a class="code" href="docfile_8cpp.html#a444e950facd2e756adaca3b381032797">assign_in_correct_place_of_line2</a>(ang1, 0);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <a class="code" href="docfile_8cpp.html#a444e950facd2e756adaca3b381032797">assign_in_correct_place_of_line2</a>(ang2, 1);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <a class="code" href="docfile_8cpp.html#a444e950facd2e756adaca3b381032797">assign_in_correct_place_of_line2</a>(ang3, 2);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            doc.append_line(line2);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line1.<a class="code" href="classDocLine.html#aaeeff8b97898067d75e8e2a0db7837cd">Is_comment</a>())</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <span class="comment">// Insert the comment</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            doc.append_line(line1);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="comment">// Next line</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        aux.next();</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    }</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">return</span> doc.dataLineNo();</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div><div class="ttc" id="classDocLine_html"><div class="ttname"><a href="classDocLine.html">DocLine</a></div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00054">docfile.h:54</a></div></div>
<div class="ttc" id="classDocLine_html_ae95eb619d620a30587ed36fcfc37b79ea5d3145796cbec597ce0ba0d1e16ea833"><div class="ttname"><a href="classDocLine.html#ae95eb619d620a30587ed36fcfc37b79ea5d3145796cbec597ce0ba0d1e16ea833">DocLine::DATALINE</a></div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00061">docfile.h:61</a></div></div>
<div class="ttc" id="classDocLine_html_a262a32bd2da2c9e0d7f30a04583e7ede"><div class="ttname"><a href="classDocLine.html#a262a32bd2da2c9e0d7f30a04583e7ede">DocLine::set_type</a></div><div class="ttdeci">void set_type(Line_Type _line_type)</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00191">docfile.h:191</a></div></div>
<div class="ttc" id="classDocLine_html_aaeeff8b97898067d75e8e2a0db7837cd"><div class="ttname"><a href="classDocLine.html#aaeeff8b97898067d75e8e2a0db7837cd">DocLine::Is_comment</a></div><div class="ttdeci">int Is_comment()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00173">docfile.h:173</a></div></div>
<div class="ttc" id="classDocLine_html_a7f21c449dfd69c398f619882768fa99e"><div class="ttname"><a href="classDocLine.html#a7f21c449dfd69c398f619882768fa99e">DocLine::Is_data</a></div><div class="ttdeci">int Is_data()</div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00180">docfile.h:180</a></div></div>
<div class="ttc" id="docfile_8cpp_html_a444e950facd2e756adaca3b381032797"><div class="ttname"><a href="docfile_8cpp.html#a444e950facd2e756adaca3b381032797">assign_in_correct_place_of_line2</a></div><div class="ttdeci">#define assign_in_correct_place_of_line2(angle_descr, angle_index)</div></div>
<div class="ttc" id="classDocFile_html"><div class="ttname"><a href="classDocFile.html">DocFile</a></div><div class="ttdef"><b>Definition:</b> <a href="docfile_8h_source.html#l00224">docfile.h:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4b4725bf2509678dcf76beb75e72c92c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void select_images </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDocFile.html">DocFile</a> &amp;&#160;</td>
          <td class="paramname"><em>DF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMetaData.html">MetaData</a> &amp;&#160;</td>
          <td class="paramname"><em>SF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>en_limit0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>limit0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>en_limitF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>limitF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Select images from a selfile meeting some condition.</p>
<p>If an image is discarded in the selfile it remains discarded in spite of it meets the condition. If it is active then it is discarded if it doesn't meet the condition. Conditions are set on the column col of the <a class="el" href="classDocFile.html">DocFile</a>. Conditions are specified by en_limit (enable limit) and the corresponding value.</p>
<p>It is not checked that the number of images (active and discarded) and the number of data linea in the <a class="el" href="classDocFile.html">DocFile</a> match. </p>

<p>Definition at line <a class="el" href="docfile_8cpp_source.html#l01470">1470</a> of file <a class="el" href="docfile_8cpp_source.html">docfile.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;{</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    doc.go_first_data_line();</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordtype">int</span> enabled;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <a class="code" href="group__MetaData.html#ga85652b971edca3acc93a9f1bef2f17f6">FOR_ALL_OBJECTS_IN_METADATA</a>(sel)</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        sel.getValue(<a class="code" href="group__MetaData.html#gga7a6f95c8cfb46e6dfb2689b5cabd3f78adc4c6714fd11379df071ebe8a442c30d">MDL_ENABLED</a>,enabled, __iter.objId);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordflow">if</span> (enabled == 1)</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <span class="keywordflow">if</span> ((en_limit0 &amp;&amp; doc(<a class="code" href="numerical__recipes_8cpp.html#afb52e720f5f0c483db5861f9e42e924e">col</a>) &lt; limit0) || (en_limitF &amp;&amp; doc(<a class="code" href="numerical__recipes_8cpp.html#afb52e720f5f0c483db5861f9e42e924e">col</a>) &gt; limitF))</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                sel.setValue(<a class="code" href="group__MetaData.html#gga7a6f95c8cfb46e6dfb2689b5cabd3f78adc4c6714fd11379df071ebe8a442c30d">MDL_ENABLED</a>, -1, __iter.objId);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        }</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        doc.next_data_line();</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;}</div><div class="ttc" id="group__MetaData_html_gga7a6f95c8cfb46e6dfb2689b5cabd3f78adc4c6714fd11379df071ebe8a442c30d"><div class="ttname"><a href="group__MetaData.html#gga7a6f95c8cfb46e6dfb2689b5cabd3f78adc4c6714fd11379df071ebe8a442c30d">MDL_ENABLED</a></div><div class="ttdoc">Is this image enabled? (int [-1 or 1]) </div><div class="ttdef"><b>Definition:</b> <a href="metadata__label_8h_source.html#l00226">metadata_label.h:226</a></div></div>
<div class="ttc" id="group__MetaData_html_ga85652b971edca3acc93a9f1bef2f17f6"><div class="ttname"><a href="group__MetaData.html#ga85652b971edca3acc93a9f1bef2f17f6">FOR_ALL_OBJECTS_IN_METADATA</a></div><div class="ttdeci">#define FOR_ALL_OBJECTS_IN_METADATA(__md)</div><div class="ttdef"><b>Definition:</b> <a href="metadata_8h_source.html#l00081">metadata.h:81</a></div></div>
<div class="ttc" id="numerical__recipes_8cpp_html_afb52e720f5f0c483db5861f9e42e924e"><div class="ttname"><a href="numerical__recipes_8cpp.html#afb52e720f5f0c483db5861f9e42e924e">col</a></div><div class="ttdeci">int col</div><div class="ttdef"><b>Definition:</b> <a href="numerical__recipes_8cpp_source.html#l08486">numerical_recipes.cpp:8486</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
