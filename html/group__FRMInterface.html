<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Xmipp: Fast Rotational Matching</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xmipp_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xmipp
   &#160;<span id="projectnumber">v20.07</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Fast Rotational Matching</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5888c70af9daa2f3f2386de56bc00ce9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#ga5888c70af9daa2f3f2386de56bc00ce9">initializePython</a> (<a class="el" href="xmipp__strings_8h.html#afbeda3fd1bdc8c37d01bdf9f5c8274ff">String</a> &amp;whichPython)</td></tr>
<tr class="memdesc:ga5888c70af9daa2f3f2386de56bc00ce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Python to be used from C++.  <a href="#ga5888c70af9daa2f3f2386de56bc00ce9">More...</a><br /></td></tr>
<tr class="separator:ga5888c70af9daa2f3f2386de56bc00ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5bf0065ff4c759b8ccb40f6b1364849"><td class="memItemLeft" align="right" valign="top">PyObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#gab5bf0065ff4c759b8ccb40f6b1364849">convertToNumpy</a> (const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; double &gt; &amp;I)</td></tr>
<tr class="memdesc:gab5bf0065ff4c759b8ccb40f6b1364849"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from <a class="el" href="classMultidimArray.html">MultidimArray</a> to numpy array.  <a href="#gab5bf0065ff4c759b8ccb40f6b1364849">More...</a><br /></td></tr>
<tr class="separator:gab5bf0065ff4c759b8ccb40f6b1364849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e43d191e65cea5343ba1d12a8e2c29f"><td class="memItemLeft" align="right" valign="top">PyObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#ga0e43d191e65cea5343ba1d12a8e2c29f">convertToNumpy</a> (const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; int &gt; &amp;I)</td></tr>
<tr class="memdesc:ga0e43d191e65cea5343ba1d12a8e2c29f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from <a class="el" href="classMultidimArray.html">MultidimArray</a> to numpy array.  <a href="#ga0e43d191e65cea5343ba1d12a8e2c29f">More...</a><br /></td></tr>
<tr class="separator:ga0e43d191e65cea5343ba1d12a8e2c29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e37f4d301ef25ed604a85a8a6e9c68f"><td class="memItemLeft" align="right" valign="top">PyObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#ga4e37f4d301ef25ed604a85a8a6e9c68f">getPointerToPythonFRMFunction</a> ()</td></tr>
<tr class="separator:ga4e37f4d301ef25ed604a85a8a6e9c68f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88487e90679a8af87c7db879718b3d85"><td class="memItemLeft" align="right" valign="top">PyObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#ga88487e90679a8af87c7db879718b3d85">getPointerToPythonGeneralWedgeClass</a> ()</td></tr>
<tr class="separator:ga88487e90679a8af87c7db879718b3d85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f353b364a974f6d6f2b60a045541a47"><td class="memItemLeft" align="right" valign="top">PyObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#ga1f353b364a974f6d6f2b60a045541a47">getPointerToPythonSingleTiltWedgeClass</a> ()</td></tr>
<tr class="separator:ga1f353b364a974f6d6f2b60a045541a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d7597be8fd954bf115c70e6785a5a27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FRMInterface.html#ga8d7597be8fd954bf115c70e6785a5a27">alignVolumesFRM</a> (PyObject *pFunc, const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; double &gt; &amp;Iref, <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; double &gt; &amp;I, PyObject *Imask, double &amp;rot, double &amp;tilt, double &amp;psi, double &amp;<a class="el" href="numerical__recipes_8cpp.html#ab81d9253b246f09be9999505d515d517">x</a>, double &amp;<a class="el" href="numerical__recipes_8cpp.html#ad919bbce6f061400a0bc5231a9cd1621">y</a>, double &amp;<a class="el" href="numerical__recipes_8cpp.html#aa508e3dbd0e86258b5c69e8a8b6b8295">z</a>, double &amp;score, <a class="el" href="classMatrix2D.html">Matrix2D</a>&lt; double &gt; &amp;A, int maxshift=10, double maxFreq=0.25, const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; int &gt; *mask=NULL)</td></tr>
<tr class="separator:ga8d7597be8fd954bf115c70e6785a5a27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8d7597be8fd954bf115c70e6785a5a27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alignVolumesFRM </td>
          <td>(</td>
          <td class="paramtype">PyObject *&#160;</td>
          <td class="paramname"><em>pFunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>Iref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PyObject *&#160;</td>
          <td class="paramname"><em>Imask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>rot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>tilt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>psi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMatrix2D.html">Matrix2D</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxshift</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>maxFreq</em> = <code>0.25</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; int &gt; *&#160;</td>
          <td class="paramname"><em>mask</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Align two volumes using FRM. The first argument is the pointer to the FRM python function. You may obtain it with <a class="el" href="group__FRMInterface.html#ga4e37f4d301ef25ed604a85a8a6e9c68f">getPointerToPythonFRMFunction()</a></p>
<p>Imask is a mask in Fourier space for I Maxshift is in pixels. MaxFreq is in digital frequency.</p>
<p>A is the transformation matrix that needs to be applied on I to fit Iref.</p>
<p>If apply is set, then I is substituted with the aligned volume. </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00121">121</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    PyObject *pyIref=<a class="code" href="group__FRMInterface.html#gab5bf0065ff4c759b8ccb40f6b1364849">convertToNumpy</a>(Iref);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    PyObject *pyI=<a class="code" href="group__FRMInterface.html#gab5bf0065ff4c759b8ccb40f6b1364849">convertToNumpy</a>(I);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    PyObject *pyMask=Py_None;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (mask!=NULL)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        pyMask=<a class="code" href="group__FRMInterface.html#gab5bf0065ff4c759b8ccb40f6b1364849">convertToNumpy</a>(*mask);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//#define DEBUG</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classImage.html">Image&lt;double&gt;</a> save;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    save()=I;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    save.<a class="code" href="classImageBase.html#ae81a8c11a832924c2bda0909882c3168">write</a>(<span class="stringliteral">&quot;PPPI.vol&quot;</span>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    save()=Iref;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    save.<a class="code" href="classImageBase.html#ae81a8c11a832924c2bda0909882c3168">write</a>(<span class="stringliteral">&quot;PPPIref.vol&quot;</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Imask=&quot;</span> &lt;&lt; Imask &lt;&lt; std::endl;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Press any key\n&quot;</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="numerical__recipes_8cpp.html#ae0323a9039add2978bf5b49550572c7c">c</a>; std::cin &gt;&gt; <a class="code" href="numerical__recipes_8cpp.html#ae0323a9039add2978bf5b49550572c7c">c</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// Call frm</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">int</span> bandWidthSphericalHarmonics0=4;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">int</span> bandWidthSphericalHarmonicsF=64;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">int</span> frequencyPixels=(int)(<a class="code" href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a>(Iref)*maxFreq);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    PyObject *arglistfrm = Py_BuildValue(<span class="stringliteral">&quot;OOOO(ii)iiO&quot;</span>, pyI, Imask, pyIref, Py_None,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            bandWidthSphericalHarmonics0, bandWidthSphericalHarmonicsF, frequencyPixels, maxshift, pyMask);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    PyObject *resultfrm = PyObject_CallObject(pFunc, arglistfrm);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    Py_DECREF(arglistfrm);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    Py_DECREF(pyIref);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    Py_DECREF(pyI);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (mask!=NULL)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        Py_DECREF(pyMask);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (resultfrm!=NULL)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        PyObject *shift=PyTuple_GetItem(resultfrm,0);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        PyObject *euler=PyTuple_GetItem(resultfrm,1);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        score=PyFloat_AsDouble(PyTuple_GetItem(resultfrm,2));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordtype">double</span> xfrm=PyFloat_AsDouble(PyList_GetItem(shift,0))-<a class="code" href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a>(Iref)/2;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">double</span> yfrm=PyFloat_AsDouble(PyList_GetItem(shift,1))-<a class="code" href="group__MultidimensionalArrays.html#ga93a0591d7e0c8b4ab932b3a45b359650">YSIZE</a>(Iref)/2;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordtype">double</span> zfrm=PyFloat_AsDouble(PyList_GetItem(shift,2))-<a class="code" href="group__MultidimensionalArrays.html#gaddfd06191afb42c978fdfaca85bb029e">ZSIZE</a>(Iref)/2;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordtype">double</span> angz1=PyFloat_AsDouble(PyList_GetItem(euler,0));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordtype">double</span> angz2=PyFloat_AsDouble(PyList_GetItem(euler,1));</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordtype">double</span> angx=PyFloat_AsDouble(PyList_GetItem(euler,2));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="classMatrix2D.html">Matrix2D&lt;double&gt;</a> Efrm, E(3,3);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="group__Geometry.html#ga831e69dcc04c1853cffb899072979654">Euler_anglesZXZ2matrix</a>(-angz1, -angx, -angz2, Efrm); <span class="comment">// -angles because FRM rotation definition</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                             <span class="comment">// is the opposite of Xmipp</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// Reorganize the matrix because the Z and X axes in the coordinate system are reversed with</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// respect to Xmipp</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">// Exmipp=[0 0 1; 0 1 0; 1 0 0]*Efrm*[0 0 1; 0 1 0; 1 0 0]</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,0,0)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 2, 2); <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,0,1)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 2, 1); <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,0,2)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 2, 0);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,1,0)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 1, 2); <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,1,1)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 1, 1); <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,1,2)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 1, 0);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,2,0)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 0, 2); <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,2,1)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 0, 1); <a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(E,2,2)=<a class="code" href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a>(Efrm, 0, 0);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        E=E.inv();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="group__Geometry.html#gaa0889ad000c2166f766c927fc7c2f58c">Euler_matrix2angles</a>(E,rot,tilt,<a class="code" href="namespacealglib.html#a0759579762ef75075769325153538c5b">psi</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        Py_DECREF(resultfrm);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="numerical__recipes_8cpp.html#ab81d9253b246f09be9999505d515d517">x</a>=-zfrm;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="numerical__recipes_8cpp.html#ad919bbce6f061400a0bc5231a9cd1621">y</a>=-yfrm;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="numerical__recipes_8cpp.html#aa508e3dbd0e86258b5c69e8a8b6b8295">z</a>=-xfrm;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment">// Apply</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="group__Geometry.html#gaf67a2d233e3fbf038d111a91197fa759">Euler_angles2matrix</a>(rot, tilt, <a class="code" href="namespacealglib.html#a0759579762ef75075769325153538c5b">psi</a>, A, <span class="keyword">true</span>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="classMatrix2D.html">Matrix2D&lt;double&gt;</a> Aaux;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="classMatrix1D.html">Matrix1D&lt;double&gt;</a> r(3);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="group__Vectors.html#ga7dce99001bf2a5ec705503346b6fec85">XX</a>(r)=<a class="code" href="numerical__recipes_8cpp.html#ab81d9253b246f09be9999505d515d517">x</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="group__Vectors.html#ga8b0ce0c5282ce1bae56cc1f9ed4b6a5f">YY</a>(r)=<a class="code" href="numerical__recipes_8cpp.html#ad919bbce6f061400a0bc5231a9cd1621">y</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="group__Vectors.html#gab88d1e959fb58c03aa1f04f1e4a7d452">ZZ</a>(r)=<a class="code" href="numerical__recipes_8cpp.html#aa508e3dbd0e86258b5c69e8a8b6b8295">z</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="transformations_8cpp.html#aadef44358397c2d16a78f83fe5302964">translation3DMatrix</a>(r,Aaux);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        A=A*Aaux;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;Result: &quot;</span> &lt;&lt; rot &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; tilt &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="namespacealglib.html#a0759579762ef75075769325153538c5b">psi</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="numerical__recipes_8cpp.html#ab81d9253b246f09be9999505d515d517">x</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="numerical__recipes_8cpp.html#ad919bbce6f061400a0bc5231a9cd1621">y</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="numerical__recipes_8cpp.html#aa508e3dbd0e86258b5c69e8a8b6b8295">z</a> &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; score &lt;&lt; std::endl;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="numerical__recipes_8cpp.html#ab81d9253b246f09be9999505d515d517">x</a>=<a class="code" href="numerical__recipes_8cpp.html#ad919bbce6f061400a0bc5231a9cd1621">y</a>=<a class="code" href="numerical__recipes_8cpp.html#aa508e3dbd0e86258b5c69e8a8b6b8295">z</a>=rot=tilt=<a class="code" href="namespacealglib.html#a0759579762ef75075769325153538c5b">psi</a>=score=0;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        A.<a class="code" href="classMatrix2D.html#a1b0afdb4a10ad1857db3db8b64715ba3">initIdentity</a>(4);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;No result\n&quot;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        PyObject *ptype, *pvalue, *ptraceback;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        PyErr_Fetch(&amp;ptype, &amp;pvalue, &amp;ptraceback);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">//pvalue contains error message</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">//ptraceback contains stack snapshot and many other information</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">//(see python traceback structure)</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">//Get error message</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        PyObject* str_exc_type = PyObject_Str(pvalue); <span class="comment">//Now a unicode</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *strExcType =  PyUnicode_AsUTF8(str_exc_type);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        std::cout &lt;&lt; strExcType &lt;&lt; std::endl;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="group__Geometry_html_gaf67a2d233e3fbf038d111a91197fa759"><div class="ttname"><a href="group__Geometry.html#gaf67a2d233e3fbf038d111a91197fa759">Euler_angles2matrix</a></div><div class="ttdeci">void Euler_angles2matrix(T alpha, T beta, T gamma, Matrix2D&lt; T &gt; &amp;A, bool homogeneous)</div><div class="ttdef"><b>Definition:</b> <a href="geometry_8cpp_source.html#l00621">geometry.cpp:621</a></div></div>
<div class="ttc" id="numerical__recipes_8cpp_html_ae0323a9039add2978bf5b49550572c7c"><div class="ttname"><a href="numerical__recipes_8cpp.html#ae0323a9039add2978bf5b49550572c7c">c</a></div><div class="ttdeci">doublereal * c</div><div class="ttdef"><b>Definition:</b> <a href="numerical__recipes_8cpp_source.html#l02247">numerical_recipes.cpp:2247</a></div></div>
<div class="ttc" id="group__FRMInterface_html_gab5bf0065ff4c759b8ccb40f6b1364849"><div class="ttname"><a href="group__FRMInterface.html#gab5bf0065ff4c759b8ccb40f6b1364849">convertToNumpy</a></div><div class="ttdeci">PyObject * convertToNumpy(const MultidimArray&lt; double &gt; &amp;I)</div><div class="ttdoc">Convert from MultidimArray to numpy array. </div><div class="ttdef"><b>Definition:</b> <a href="libraries_2interface_2frm_8cpp_source.html#l00058">frm.cpp:58</a></div></div>
<div class="ttc" id="numerical__recipes_8cpp_html_ad919bbce6f061400a0bc5231a9cd1621"><div class="ttname"><a href="numerical__recipes_8cpp.html#ad919bbce6f061400a0bc5231a9cd1621">y</a></div><div class="ttdeci">static double * y</div><div class="ttdef"><b>Definition:</b> <a href="numerical__recipes_8cpp_source.html#l08506">numerical_recipes.cpp:8506</a></div></div>
<div class="ttc" id="classImageBase_html_ae81a8c11a832924c2bda0909882c3168"><div class="ttname"><a href="classImageBase.html#ae81a8c11a832924c2bda0909882c3168">ImageBase::write</a></div><div class="ttdeci">void write(const FileName &amp;name=&quot;&quot;, size_t select_img=ALL_IMAGES, bool isStack=false, int mode=WRITE_OVERWRITE, CastWriteMode castMode=CW_CAST, int _swapWrite=0)</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__image__base_8cpp_source.html#l00210">xmipp_image_base.cpp:210</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_ga4b3f38e76847a3fbe3e579610b23ad29"><div class="ttname"><a href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a></div><div class="ttdeci">#define XSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00101">multidim_array.h:101</a></div></div>
<div class="ttc" id="numerical__recipes_8cpp_html_ab81d9253b246f09be9999505d515d517"><div class="ttname"><a href="numerical__recipes_8cpp.html#ab81d9253b246f09be9999505d515d517">x</a></div><div class="ttdeci">doublereal * x</div><div class="ttdef"><b>Definition:</b> <a href="numerical__recipes_8cpp_source.html#l02247">numerical_recipes.cpp:2247</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_gaddfd06191afb42c978fdfaca85bb029e"><div class="ttname"><a href="group__MultidimensionalArrays.html#gaddfd06191afb42c978fdfaca85bb029e">ZSIZE</a></div><div class="ttdeci">#define ZSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00109">multidim_array.h:109</a></div></div>
<div class="ttc" id="group__Matrices_html_gab40746be05d4bbf352787018922ecc2e"><div class="ttname"><a href="group__Matrices.html#gab40746be05d4bbf352787018922ecc2e">MAT_ELEM</a></div><div class="ttdeci">#define MAT_ELEM(m, i, j)</div><div class="ttdef"><b>Definition:</b> <a href="matrix2d_8h_source.html#l00117">matrix2d.h:117</a></div></div>
<div class="ttc" id="classMatrix2D_html"><div class="ttname"><a href="classMatrix2D.html">Matrix2D&lt; double &gt;</a></div></div>
<div class="ttc" id="group__Vectors_html_ga7dce99001bf2a5ec705503346b6fec85"><div class="ttname"><a href="group__Vectors.html#ga7dce99001bf2a5ec705503346b6fec85">XX</a></div><div class="ttdeci">#define XX(v)</div><div class="ttdef"><b>Definition:</b> <a href="matrix1d_8h_source.html#l00088">matrix1d.h:88</a></div></div>
<div class="ttc" id="transformations_8cpp_html_aadef44358397c2d16a78f83fe5302964"><div class="ttname"><a href="transformations_8cpp.html#aadef44358397c2d16a78f83fe5302964">translation3DMatrix</a></div><div class="ttdeci">template void translation3DMatrix(const Matrix1D&lt; float &gt; &amp;translation, Matrix2D&lt; float &gt; &amp;resMatrix, bool inverse)</div></div>
<div class="ttc" id="numerical__recipes_8cpp_html_aa508e3dbd0e86258b5c69e8a8b6b8295"><div class="ttname"><a href="numerical__recipes_8cpp.html#aa508e3dbd0e86258b5c69e8a8b6b8295">z</a></div><div class="ttdeci">double z</div><div class="ttdef"><b>Definition:</b> <a href="numerical__recipes_8cpp_source.html#l08509">numerical_recipes.cpp:8509</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_ga93a0591d7e0c8b4ab932b3a45b359650"><div class="ttname"><a href="group__MultidimensionalArrays.html#ga93a0591d7e0c8b4ab932b3a45b359650">YSIZE</a></div><div class="ttdeci">#define YSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00105">multidim_array.h:105</a></div></div>
<div class="ttc" id="group__Vectors_html_ga8b0ce0c5282ce1bae56cc1f9ed4b6a5f"><div class="ttname"><a href="group__Vectors.html#ga8b0ce0c5282ce1bae56cc1f9ed4b6a5f">YY</a></div><div class="ttdeci">#define YY(v)</div><div class="ttdef"><b>Definition:</b> <a href="matrix1d_8h_source.html#l00096">matrix1d.h:96</a></div></div>
<div class="ttc" id="classMatrix1D_html"><div class="ttname"><a href="classMatrix1D.html">Matrix1D&lt; double &gt;</a></div></div>
<div class="ttc" id="group__Geometry_html_ga831e69dcc04c1853cffb899072979654"><div class="ttname"><a href="group__Geometry.html#ga831e69dcc04c1853cffb899072979654">Euler_anglesZXZ2matrix</a></div><div class="ttdeci">void Euler_anglesZXZ2matrix(double a, double b, double g, Matrix2D&lt; double &gt; &amp;A, bool homogeneous)</div><div class="ttdef"><b>Definition:</b> <a href="geometry_8cpp_source.html#l00658">geometry.cpp:658</a></div></div>
<div class="ttc" id="classImage_html"><div class="ttname"><a href="classImage.html">Image&lt; double &gt;</a></div></div>
<div class="ttc" id="namespacealglib_html_a0759579762ef75075769325153538c5b"><div class="ttname"><a href="namespacealglib.html#a0759579762ef75075769325153538c5b">alglib::psi</a></div><div class="ttdeci">double psi(const double x)</div><div class="ttdef"><b>Definition:</b> <a href="specialfunctions_8cpp_source.html#l02492">specialfunctions.cpp:2492</a></div></div>
<div class="ttc" id="group__Geometry_html_gaa0889ad000c2166f766c927fc7c2f58c"><div class="ttname"><a href="group__Geometry.html#gaa0889ad000c2166f766c927fc7c2f58c">Euler_matrix2angles</a></div><div class="ttdeci">void Euler_matrix2angles(const Matrix2D&lt; double &gt; &amp;A, double &amp;alpha, double &amp;beta, double &amp;gamma, bool homogeneous)</div><div class="ttdef"><b>Definition:</b> <a href="geometry_8cpp_source.html#l00836">geometry.cpp:836</a></div></div>
<div class="ttc" id="group__Vectors_html_gab88d1e959fb58c03aa1f04f1e4a7d452"><div class="ttname"><a href="group__Vectors.html#gab88d1e959fb58c03aa1f04f1e4a7d452">ZZ</a></div><div class="ttdeci">#define ZZ(v)</div><div class="ttdef"><b>Definition:</b> <a href="matrix1d_8h_source.html#l00104">matrix1d.h:104</a></div></div>
<div class="ttc" id="classMatrix2D_html_a1b0afdb4a10ad1857db3db8b64715ba3"><div class="ttname"><a href="classMatrix2D.html#a1b0afdb4a10ad1857db3db8b64715ba3">Matrix2D::initIdentity</a></div><div class="ttdeci">void initIdentity()</div><div class="ttdef"><b>Definition:</b> <a href="matrix2d_8h_source.html#l00835">matrix2d.h:835</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gab5bf0065ff4c759b8ccb40f6b1364849"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PyObject* convertToNumpy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>I</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert from <a class="el" href="classMultidimArray.html">MultidimArray</a> to numpy array. </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00058">58</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    npy_intp dim[3];</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    dim[0]=<a class="code" href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a>(I);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    dim[1]=<a class="code" href="group__MultidimensionalArrays.html#ga93a0591d7e0c8b4ab932b3a45b359650">YSIZE</a>(I);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    dim[2]=<a class="code" href="group__MultidimensionalArrays.html#gaddfd06191afb42c978fdfaca85bb029e">ZSIZE</a>(I);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    PyObject* pyI=PyArray_SimpleNewFromData(3, dim, NPY_DOUBLE, (<span class="keywordtype">void</span> *)<a class="code" href="group__MultidimensionalArrays.html#gac87b223f03097d45f776b44b6aeea9f7">MULTIDIM_ARRAY</a>(I));</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">//npy_intp *afterSize=PyArray_DIMS(pyI);</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> pyI;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div><div class="ttc" id="group__MultidimensionalArrays_html_gac87b223f03097d45f776b44b6aeea9f7"><div class="ttname"><a href="group__MultidimensionalArrays.html#gac87b223f03097d45f776b44b6aeea9f7">MULTIDIM_ARRAY</a></div><div class="ttdeci">#define MULTIDIM_ARRAY(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00136">multidim_array.h:136</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_ga4b3f38e76847a3fbe3e579610b23ad29"><div class="ttname"><a href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a></div><div class="ttdeci">#define XSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00101">multidim_array.h:101</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_gaddfd06191afb42c978fdfaca85bb029e"><div class="ttname"><a href="group__MultidimensionalArrays.html#gaddfd06191afb42c978fdfaca85bb029e">ZSIZE</a></div><div class="ttdeci">#define ZSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00109">multidim_array.h:109</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_ga93a0591d7e0c8b4ab932b3a45b359650"><div class="ttname"><a href="group__MultidimensionalArrays.html#ga93a0591d7e0c8b4ab932b3a45b359650">YSIZE</a></div><div class="ttdeci">#define YSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00105">multidim_array.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga0e43d191e65cea5343ba1d12a8e2c29f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PyObject* convertToNumpy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMultidimArray.html">MultidimArray</a>&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>I</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert from <a class="el" href="classMultidimArray.html">MultidimArray</a> to numpy array. </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00069">69</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    npy_intp dim[3];</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    dim[0]=<a class="code" href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a>(I);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    dim[1]=<a class="code" href="group__MultidimensionalArrays.html#ga93a0591d7e0c8b4ab932b3a45b359650">YSIZE</a>(I);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    dim[2]=<a class="code" href="group__MultidimensionalArrays.html#gaddfd06191afb42c978fdfaca85bb029e">ZSIZE</a>(I);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    PyObject* pyI=PyArray_SimpleNewFromData(3, dim, NPY_INT, (<span class="keywordtype">void</span> *)<a class="code" href="group__MultidimensionalArrays.html#gac87b223f03097d45f776b44b6aeea9f7">MULTIDIM_ARRAY</a>(I));</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> pyI;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="ttc" id="group__MultidimensionalArrays_html_gac87b223f03097d45f776b44b6aeea9f7"><div class="ttname"><a href="group__MultidimensionalArrays.html#gac87b223f03097d45f776b44b6aeea9f7">MULTIDIM_ARRAY</a></div><div class="ttdeci">#define MULTIDIM_ARRAY(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00136">multidim_array.h:136</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_ga4b3f38e76847a3fbe3e579610b23ad29"><div class="ttname"><a href="group__MultidimensionalArrays.html#ga4b3f38e76847a3fbe3e579610b23ad29">XSIZE</a></div><div class="ttdeci">#define XSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00101">multidim_array.h:101</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_gaddfd06191afb42c978fdfaca85bb029e"><div class="ttname"><a href="group__MultidimensionalArrays.html#gaddfd06191afb42c978fdfaca85bb029e">ZSIZE</a></div><div class="ttdeci">#define ZSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00109">multidim_array.h:109</a></div></div>
<div class="ttc" id="group__MultidimensionalArrays_html_ga93a0591d7e0c8b4ab932b3a45b359650"><div class="ttname"><a href="group__MultidimensionalArrays.html#ga93a0591d7e0c8b4ab932b3a45b359650">YSIZE</a></div><div class="ttdeci">#define YSIZE(v)</div><div class="ttdef"><b>Definition:</b> <a href="multidim__array_8h_source.html#l00105">multidim_array.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4e37f4d301ef25ed604a85a8a6e9c68f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PyObject* getPointerToPythonFRMFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get pointer to FRM function. This is done to avoid losing time in importing the module each time. Remind to free it when you do not need it any longer with Py_DECREF(pFunc); </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00079">79</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="xmipp__strings_8h.html#afbeda3fd1bdc8c37d01bdf9f5c8274ff">String</a> path=getenv(<span class="stringliteral">&quot;PYTHONPATH&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    PyObject * pName = PyUnicode_FromString(<span class="stringliteral">&quot;sh_alignment.frm&quot;</span>); <span class="comment">// Import sh_alignment.frm</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    PyObject * pModule = PyImport_Import(pName);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (pModule==NULL)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="group__ErrorHandling.html#ga4ab7f9b2fd1ec4b9efcfba0c9b33052c">REPORT_ERROR</a>(<a class="code" href="group__ErrorHandling.html#ggab0df38968e4f03a3f1f6d6df0f31f45aa60458766acaafb3722c0234011bbdbf8">ERR_UNCLASSIFIED</a>,<span class="stringliteral">&quot;Cannot import sh_alignment.&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    PyObject * pFunc = PyObject_GetAttrString(pModule, <span class="stringliteral">&quot;frm_align&quot;</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    Py_DECREF(pName);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    Py_DECREF(pModule);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> pFunc;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div><div class="ttc" id="group__ErrorHandling_html_ggab0df38968e4f03a3f1f6d6df0f31f45aa60458766acaafb3722c0234011bbdbf8"><div class="ttname"><a href="group__ErrorHandling.html#ggab0df38968e4f03a3f1f6d6df0f31f45aa60458766acaafb3722c0234011bbdbf8">ERR_UNCLASSIFIED</a></div><div class="ttdoc">Just to locate unclassified errors. </div><div class="ttdef"><b>Definition:</b> <a href="xmipp__error_8h_source.html#l00197">xmipp_error.h:197</a></div></div>
<div class="ttc" id="group__ErrorHandling_html_ga4ab7f9b2fd1ec4b9efcfba0c9b33052c"><div class="ttname"><a href="group__ErrorHandling.html#ga4ab7f9b2fd1ec4b9efcfba0c9b33052c">REPORT_ERROR</a></div><div class="ttdeci">#define REPORT_ERROR(nerr, ErrormMsg)</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__error_8h_source.html#l00238">xmipp_error.h:238</a></div></div>
<div class="ttc" id="xmipp__strings_8h_html_afbeda3fd1bdc8c37d01bdf9f5c8274ff"><div class="ttname"><a href="xmipp__strings_8h.html#afbeda3fd1bdc8c37d01bdf9f5c8274ff">String</a></div><div class="ttdeci">std::string String</div><div class="ttdef"><b>Definition:</b> <a href="xmipp__strings_8h_source.html#l00034">xmipp_strings.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga88487e90679a8af87c7db879718b3d85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PyObject* getPointerToPythonGeneralWedgeClass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get pointer to GeneralWedge class. This is done to avoid losing time in importing the module each time. Remind to free it when you do not need it any longer with Py_DECREF(pClass); </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00092">92</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    PyObject * pName = PyUnicode_FromString(<span class="stringliteral">&quot;sh_alignment.tompy.filter&quot;</span>); <span class="comment">// Import sh_alignment.tompy.filter</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    PyObject * pModule = PyImport_Import(pName);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    PyObject * pDict = PyModule_GetDict(pModule);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    PyObject * pWedgeClass = PyDict_GetItemString(pDict, <span class="stringliteral">&quot;GeneralWedge&quot;</span>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    Py_DECREF(pName);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    Py_DECREF(pModule);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    Py_DECREF(pDict);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> pWedgeClass;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1f353b364a974f6d6f2b60a045541a47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PyObject* getPointerToPythonSingleTiltWedgeClass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get pointer to a Single Tile Missing Wedge Class. Remind to free it when you do not need it any longer with Py_DECREF(pSTMMclass); </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00104">104</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    PyObject * pName = PyUnicode_FromString(<span class="stringliteral">&quot;sh_alignment.tompy.filter&quot;</span>); <span class="comment">// Import sh_alignment.tompy.filter</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    PyObject * pModule = PyImport_Import(pName);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    PyObject * pDict = PyModule_GetDict(pModule);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    PyObject * pSTMMclass = PyDict_GetItemString(pDict, <span class="stringliteral">&quot;SingleTiltWedge&quot;</span>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    Py_DECREF(pName);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    Py_DECREF(pModule);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    Py_DECREF(pDict);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> pSTMMclass;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga5888c70af9daa2f3f2386de56bc00ce9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initializePython </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="xmipp__strings_8h.html#afbeda3fd1bdc8c37d01bdf9f5c8274ff">String</a> &amp;&#160;</td>
          <td class="paramname"><em>whichPython</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Python to be used from C++. </p>

<p>Definition at line <a class="el" href="libraries_2interface_2frm_8cpp_source.html#l00044">44</a> of file <a class="el" href="libraries_2interface_2frm_8cpp_source.html">frm.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="libraries_2interface_2frm_8cpp.html#a561938e4928e52364f904af09caaa4d8">findWhichPython</a>(whichPython);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//    wchar_t *program = Py_DecodeLocale(whichPython.c_str(), NULL);</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//    if (program == NULL) {</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//        fprintf(stderr, &quot;Fatal error: cannot decode the python\n&quot;);</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//        exit(1);</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">//    }</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    Py_SetProgramName((<span class="keywordtype">wchar_t</span> *)whichPython.c_str());</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    Py_Initialize();</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//    #define NUMPY_IMPORT_ARRAY_RETVAL</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//  import_array(); // For working with numpy</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div><div class="ttc" id="libraries_2interface_2frm_8cpp_html_a561938e4928e52364f904af09caaa4d8"><div class="ttname"><a href="libraries_2interface_2frm_8cpp.html#a561938e4928e52364f904af09caaa4d8">findWhichPython</a></div><div class="ttdeci">void findWhichPython(String &amp;whichPython)</div><div class="ttdef"><b>Definition:</b> <a href="libraries_2interface_2frm_8cpp_source.html#l00031">frm.cpp:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
